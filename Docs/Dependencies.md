# 의존성 관리 문서

이 문서는 KeywordPulse 프로젝트의 의존성 관리에 관한 정보를 제공합니다.

## 1. 주요 의존성 목록

### 1.1 프론트엔드 의존성

| 패키지 | 버전 | 용도 |
|-------|------|------|
| Next.js | ^14.0.3 | React 프레임워크 |
| React | ^18.2.0 | UI 라이브러리 |
| TypeScript | ^5.0.0 | 타입 시스템 |
| TailwindCSS | ^3.3.0 | 스타일링 |
| @supabase/auth-helpers-nextjs | ^0.7.0 | Supabase 인증 통합 |
| @supabase/supabase-js | ^2.21.0 | Supabase 클라이언트 |
| chart.js | ^4.3.0 | 차트 시각화 |
| react-chartjs-2 | ^5.2.0 | React용 Chart.js 래퍼 |

### 1.2 백엔드 의존성

| 패키지 | 버전 | 용도 |
|-------|------|------|
| fastapi | ^0.95.0 | Python API 프레임워크 |
| uvicorn | ^0.21.1 | ASGI 서버 |
| requests | ^2.28.2 | HTTP 요청 라이브러리 |
| python-dotenv | ^1.0.0 | 환경 변수 관리 |
| supabase | ^1.0.0 | Supabase Python 클라이언트 |

### 1.3 개발 의존성

| 패키지 | 버전 | 용도 |
|-------|------|------|
| eslint | ^8.38.0 | 코드 린팅 |
| jest | ^29.5.0 | JavaScript 테스트 |
| @testing-library/react | ^14.0.0 | React 컴포넌트 테스트 |
| pytest | ^7.3.1 | Python 테스트 |
| coverage | ^7.2.3 | 테스트 커버리지 |

## 2. 의존성 관리 전략

### 2.1 버전 관리

- 모든 핵심 의존성은 버전을 고정하여 일관된 빌드를 보장합니다.
- 보안 업데이트는 정기적으로 검토하고 적용합니다.
- 버전 업그레이드는 스테이징 환경에서 충분히 테스트 후 적용합니다.

### 2.2 의존성 추가 가이드라인

새로운 의존성을 추가할 때는 다음 기준을 고려해야 합니다:

1. **필요성**: 해당 의존성이 정말 필요한지 검토
2. **유지 관리**: 활발히 유지 관리되는 라이브러리인지 확인
3. **크기**: 번들 크기에 미치는 영향 고려
4. **라이선스**: 호환 가능한 라이선스인지 확인
5. **대안**: 이미 설치된 다른 패키지로 대체 가능한지 검토

### 2.3 Peer Dependencies

Next.js와 React의 호환성을 위해 다음 버전 조합을 유지합니다:

- React: ^18.2.0
- React DOM: ^18.2.0
- Next.js: ^14.0.3

## 3. 환경별 의존성 관리

### 3.1 로컬 개발 환경

- 개발자는 `npm install`을 통해 모든 의존성을 설치합니다.
- Node.js 18.x 및 Python 3.10 이상을 사용합니다.
- 로컬 환경 구성은 `.env.local` 파일을 통해 관리합니다.

### 3.2 CI/CD 환경

- GitHub Actions은 캐싱을 통해 빠른 의존성 설치를 보장합니다.
- 의존성 설치 단계에서 CI 전용 스크립트를 실행합니다.
- 보안 취약점 스캔은 `npm audit`을 통해 자동화됩니다.

### 3.3 프로덕션 환경

- Vercel 배포에서는 package-lock.json을 기반으로 의존성을 설치합니다.
- 프로덕션 빌드에서는 개발 의존성을 제외합니다.
- 정적 내보내기(Static Export)를 사용하므로 서버리스 환경에 종속성이 낮습니다.
- 환경 변수는 Vercel 대시보드에서 관리합니다.

## 4. 정적 내보내기 (Static Export) 관련 고려사항

### 4.1 Edge Runtime 호환성

- API 라우트에서 `export const runtime = "edge"` 설정 사용
- Edge 런타임은 다음 패키지에 대한 제한된 지원만 제공:
  - @edge-runtime 패키지
  - Node.js 표준 라이브러리의 일부만 지원

### 4.2 환경 변수 처리

- 정적 내보내기에서는 `next.config.js`의 `env` 섹션을 통해 환경 변수 제공
- 클라이언트에서 사용되는 환경 변수는 `NEXT_PUBLIC_` 접두사 필요
- 빌드 시점에 환경 변수가 번들에 포함됨

## 5. 알려진 이슈 및 해결 방법

### 5.1 의존성 충돌

- Next.js와 특정 라이브러리 간 충돌이 발생할 경우 해결 방법:
  1. package.json의 resolutions 필드 사용
  2. 호환 가능한 버전으로 다운그레이드

### 5.2 빌드 성능 최적화

- 큰 의존성(lodash, moment 등)은 필요한 기능만 가져오는 방식으로 최적화
- 불필요한 개발 의존성 제거

### 5.3 정적 내보내기 관련 이슈

- 서버 컴포넌트가 필요한 기능은 클라이언트 컴포넌트로 전환
- API 라우트는 Edge 런타임으로 마이그레이션 또는 외부 API로 대체
- `getServerSideProps`와 같은 서버 전용 기능은 사용 불가

---

이 문서는 프로젝트의 진행 상황에 따라 지속적으로 업데이트됩니다.
최종 업데이트: 2023-11-20 