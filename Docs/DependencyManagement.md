# KeywordPulse 의존성 관리 가이드

이 문서는 KeywordPulse 프로젝트의 의존성 관리 전략과 패키지 구성에 대한 상세 가이드를 제공합니다. 개발 과정에서 종속성 추가, 업데이트, 관리 방법을 설명합니다.

## 1. 패키지 관리 원칙

KeywordPulse 프로젝트는 다음 원칙에 따라 패키지를 관리합니다:

- **최소 의존성**: 필요한 패키지만 포함하여 번들 크기 최소화
- **버전 명시**: 모든 패키지는 명확한 버전으로 고정
- **정기적 업데이트**: 보안 및 성능 이슈를 방지하기 위한 정기적 업데이트
- **호환성 검증**: 새 패키지 추가 시 기존 시스템과의 호환성 검증

## 2. 주요 의존성 목록

### 2.1 프론트엔드 핵심 의존성

| 패키지 | 버전 | 용도 | 비고 |
|-------|------|------|------|
| next | 14.0.3 | React 프레임워크 | App Router 사용 |
| react | ^18 | UI 라이브러리 | React 18 기능 활용 |
| react-dom | ^18 | DOM 렌더링 | React 18 호환 |
| typescript | ^5.8.3 | 타입 시스템 | 정적 타입 검사 |
| tailwindcss | ^3.3.0 | CSS 프레임워크 | 유틸리티 기반 스타일링 |

### 2.2 데이터 시각화 의존성

| 패키지 | 버전 | 용도 | 비고 |
|-------|------|------|------|
| chart.js | ^4.4.9 | 차트 라이브러리 | 성능 최적화된 차트 |
| react-chartjs-2 | ^5.3.0 | React Chart.js 래퍼 | React 통합 |
| react-markdown | ^9.0.0 | 마크다운 렌더링 | 콘텐츠 표시용 |

### 2.3 백엔드 및 통합 의존성

| 패키지 | 버전 | 용도 | 비고 |
|-------|------|------|------|
| @supabase/supabase-js | ^2.38.4 | Supabase 클라이언트 | 인증 및 데이터 접근 |
| @supabase/auth-helpers-react | 0.4.2 | 인증 헬퍼 | React 통합 |
| @sentry/nextjs | ^7.81.0 | 오류 모니터링 | 성능 추적 및 오류 보고 |

### 2.4 개발 의존성

| 패키지 | 버전 | 용도 | 비고 |
|-------|------|------|------|
| eslint | ^8 | 코드 린팅 | 코드 품질 검사 |
| jest | ^29.7.0 | 테스트 프레임워크 | 단위 및 통합 테스트 |
| ts-jest | ^29.3.2 | Jest TypeScript 통합 | TypeScript 테스트 지원 |

## 3. 의존성 관리 방법

### 3.1 패키지 추가하기

새 패키지를 추가할 때는 다음 가이드라인을 따릅니다:

```bash
# 프로덕션 의존성 추가
npm install --save 패키지명@버전

# 개발 의존성 추가
npm install --save-dev 패키지명@버전
```

예시:
```bash
npm install --save chart.js@4.4.9
```

> **중요**: 부정확한 버전 범위(`^`, `~` 등)보다는 정확한 버전을 명시하는 것을 권장합니다.

### 3.2 의존성 업데이트

정기적인 의존성 업데이트는 다음 프로세스를 따릅니다:

1. 현재 의존성 확인:
   ```bash
   npm outdated
   ```

2. 업데이트 및 테스트 계획 수립
3. 스테이징 환경에서 업데이트 테스트:
   ```bash
   npm update 패키지명@버전
   ```

4. 모든 테스트와 빌드가 성공하면 변경사항 커밋

### 3.3 package.json 구성

```json
{
  "dependencies": {
    // 프로덕션에 필요한 패키지
  },
  "devDependencies": {
    // 개발 시에만 필요한 패키지
  }
}
```

## 4. Vercel 배포를 위한 의존성 구성

KeywordPulse 프로젝트는 Vercel에 정적 사이트로 배포됩니다. 다음 설정이 적용되어 있습니다:

### 4.1 TypeScript 의존성 관리

Vercel 빌드 중 TypeScript 오류를 우회하기 위해:

1. TypeScript는 `dependencies`에 포함됩니다.
2. `build.js` 스크립트에서 자동으로 TypeScript 설치 여부를 확인합니다.
3. `next.config.js`에 다음 설정이 포함되어 있습니다:
   ```javascript
   typescript: {
     ignoreBuildErrors: true,
   },
   eslint: {
     ignoreDuringBuilds: true,
   },
   ```

### 4.2 .npmrc 설정

프로젝트 루트에 `.npmrc` 파일을 통해 NPM 동작을 구성합니다:

```
legacy-peer-deps=true
save-exact=true
include=dev
```

이 설정은:
- 레거시 피어 의존성 문제 해결
- 정확한 버전 저장
- 개발 의존성 포함 (필요 시)

## 5. 의존성 관련 문제 해결

### 5.1 일반적인 문제

1. **의존성 충돌**: 패키지 간 버전 호환성 문제
   - 해결: `npm ls 패키지명`으로 의존성 트리 확인

2. **번들 크기 증가**: 과도한 패키지 추가로 인한 성능 저하
   - 해결: 번들 분석 도구 사용 (`next/bundle-analyzer`)

3. **빌드 오류**: 타입스크립트 또는 ESLint 오류로 인한 빌드 실패
   - 해결: 오류 수정 또는 `next.config.js`에서 오류 무시 설정

### 5.2 Vercel 배포 관련 문제

1. **TypeScript 오류**: Vercel 배포 시 TypeScript 오류
   - 해결: `typescript` 패키지를 `dependencies`에 추가하고 `ignoreBuildErrors: true` 설정

2. **환경 변수 문제**: 환경 변수 미설정
   - 해결: Vercel 대시보드에서 환경 변수 구성

## 6. 의존성 감사 및 보안

정기적인 보안 감사 실시:

```bash
npm audit
```

보안 취약점 해결:

```bash
npm audit fix
# 또는 주요 업데이트가 필요한 경우
npm audit fix --force
```

## 7. 패키지 선택 가이드라인

새로운 패키지를 도입할 때 고려할 사항:

1. **유지 관리 상태**: 활발한 개발 및 최근 업데이트 여부
2. **커뮤니티 지원**: GitHub 스타, 기여자 수, 이슈 응답 시간
3. **번들 크기**: 패키지 크기 및 트리 쉐이킹 지원
4. **성능 영향**: 런타임 성능에 미치는 영향
5. **라이선스**: 프로젝트와 호환되는 라이선스인지 확인

## 8. 향후 계획

1. **의존성 모니터링 자동화**: 보안 취약점 및 업데이트 자동 알림
2. **마이크로 프론트엔드 아키텍처**: 필요에 따라 독립적인 배포 및 의존성 관리
3. **모노레포 전환 검토**: 향후 확장에 대비한 모노레포 구조 검토

---

이 문서는 프로젝트 진행 상황에 따라 계속 업데이트될 예정입니다. 